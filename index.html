<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Estancia - App de Pedidos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --primary: #5c3c2e; --accent: #d4a373; }
        body { font-family: sans-serif; background-color: #f9fafb; }
        .bg-estancia { background-color: var(--primary); }
        .text-estancia { color: var(--primary); }
        .card-menu { border-left: 5px solid var(--primary); }
        .category-header { position: sticky; top: 0; z-index: 20; background: #f9fafb; padding: 10px 0; border-bottom: 1px solid #e5e7eb; }
        .positive-vibes-logo { font-size: 10px; color: #d4a373; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; }
    </style>
</head>
<body class="pb-44">

    <div class="bg-estancia text-white p-6 text-center shadow-xl">
        <div class="positive-vibes-logo mb-2">✨ Vibras Positivas ✨</div>
        <h1 class="text-3xl font-black tracking-tighter uppercase italic">LA ESTANCIA</h1>
        [span_2](start_span)<p class="text-[10px] uppercase tracking-[0.2em] opacity-80 mt-1">Asados & Mariscos[span_2](end_span)</p>
        <div class="mt-3 text-[11px] font-light italic">
            [span_3](start_span)<p><i class="fas fa-map-marker-alt"></i> Calle 22 Diagonal a la Catedral[span_3](end_span)</p>
            [span_4](start_span)<p>Caucasia - Antioquia[span_4](end_span)</p>
        </div>
    </div>

    <div class="p-4 max-w-md mx-auto">
        <div class="bg-white p-5 rounded-2xl shadow-sm mb-6 border border-gray-100">
            <h2 class="font-bold text-estancia mb-4 flex items-center gap-2 text-sm uppercase">
                <i class="fas fa-motorcycle"></i> Datos del Domicilio
            </h2>
            <div class="space-y-3">
                <input type="text" id="nombre" placeholder="Nombre completo" class="w-full p-3 bg-gray-50 border rounded-xl outline-none focus:border-amber-800">
                <input type="tel" id="celular" placeholder="Número de Celular" class="w-full p-3 bg-gray-50 border rounded-xl outline-none focus:border-amber-800">
                <input type="text" id="direccion" placeholder="Dirección de entrega" class="w-full p-3 bg-gray-50 border rounded-xl outline-none focus:border-amber-800">
                <textarea id="obs_generales" placeholder="¿Alguna nota para la cocina?" class="w-full p-3 bg-gray-50 border rounded-xl text-sm outline-none" rows="2"></textarea>
            </div>
        </div>

        <div class="relative mb-8">
            [span_5](start_span)<input type="text" id="search" onkeyup="filterMenu()" placeholder="¿Qué se te antoja hoy?[span_5](end_span)" 
                   class="w-full p-4 pl-12 rounded-2xl border shadow-md outline-none focus:ring-2 focus:ring-amber-900">
            <i class="fas fa-search absolute left-4 top-5 text-gray-400"></i>
        </div>

        <div id="menu-container" class="space-y-10 min-h-[300px]">
            </div>
    </div>

    <div class="fixed bottom-0 w-full bg-white border-t p-5 shadow-[0_-10px_25px_rgba(0,0,0,0.1)] z-50">
        <div class="max-w-md mx-auto">
            <div class="flex justify-between items-center mb-4">
                [span_6](start_span)<span class="text-gray-500 font-medium italic">Total a pagar:[span_6](end_span)</span>
                [span_7](start_span)<span id="total-price" class="text-3xl font-black text-estancia">$0[span_7](end_span)</span>
            </div>
            <button id="btn-whatsapp" onclick="sendWhatsApp()" class="w-full bg-green-600 text-white py-4 rounded-2xl font-bold flex justify-center items-center gap-3 shadow-lg active:scale-95 transition-all">
                [span_8](start_span)<i class="fab fa-whatsapp text-2xl"></i> PEDIR POR WHATSAPP[span_8](end_span)
            </button>
        </div>
    </div>

    <script>
        const menuData = [
            { cat: "Entradas", items: [
                [span_9](start_span){ n: "Patacón tres salsas", p: 16000, d: "Suero, guacamole y hogao[span_9](end_span)" },
                [span_10](start_span){ n: "Maduritos con queso", p: 16000, d: "Queso derretido[span_10](end_span)" },
                [span_11](start_span){ n: "Entrada de chorizo", p: 16000, d: "Con yuca o patacón[span_11](end_span)" },
                [span_12](start_span){ n: "Entrada de chicharrón", p: 20000, d: "Crujiente[span_12](end_span)" }
            ]},
            { cat: "Platos Fuertes", items: [
                [span_13](start_span){ n: "Rollo de pollo", p: 35000, d: "Jamón, tocineta y queso[span_13](end_span)" },
                [span_14](start_span){ n: "Pechuga tropical", p: 35000, d: "Piña calada y bacon[span_14](end_span)" },
                [span_15](start_span){ n: "Solomito en tocineta", p: 40000, d: "Medallones en crema[span_15](end_span)" },
                [span_16](start_span){ n: "Filet Mignon", p: 40000, d: "Res envuelta en bacon[span_16](end_span)" }
            ]},
            { cat: "Asados al Grill", items: [
                [span_17](start_span){ n: "Churrasco (350g)", p: 40000, d: "Corte mariposa[span_17](end_span)" },
                [span_18](start_span){ n: "Punta de Anca res", p: 40000, d: "Rico en grasas externas[span_18](end_span)" },
                [span_19](start_span){ n: "Mix parrillero", p: 38000, d: "Res, pollo, cerdo y chorizo[span_19](end_span)" },
                [span_20](start_span){ n: "Costillas BBQ (500g)", p: 38000, d: "Miel-BBQ[span_20](end_span)" }
            ]},
            { cat: "Mariscos y Pescados", items: [
                [span_21](start_span){ n: "Cazuela de mariscos", p: 49000, d: "Selección completa[span_21](end_span)" },
                [span_22](start_span){ n: "Salmón a la plancha", p: 48000, d: "Fresco al grill[span_22](end_span)" },
                [span_23](start_span){ n: "Camarones al ajillo", p: 46000, d: "Salteados en ajo[span_23](end_span)" }
            ]},
            { cat: "Bebidas", items: [
                [span_24](start_span){ n: "Limonada Natural", p: 9000, d: "9000[span_24](end_span)" },
                [span_25](start_span){ n: "Gaseosa 350ml", p: 4000, d: "4000[span_25](end_span)" },
                [span_26](start_span){ n: "Cerveza Águila", p: 6000, d: "6000[span_26](end_span)" }
            ]}
        ];

        let cart = {};

        function renderMenu() {
            const container = document.getElementById('menu-container');
            if (!container) return;
            
            container.innerHTML = menuData.map(section => `
                <div class="menu-section">
                    <div class="category-header">
                        <h3 class="text-xs font-black text-estancia tracking-[0.3em] uppercase px-2">${section.cat}</h3>
                    </div>
                    <div class="mt-4 space-y-3">
                        ${section.items.map(item => {
                            const cleanId = item.n.replace(/\s+/g, '').replace(/[^a-zA-Z0-9]/g, '');
                            return `
                            <div class="item-card bg-white p-4 rounded-2xl shadow-sm flex justify-between items-center card-menu border border-gray-100">
                                <div class="flex-1 pr-2">
                                    <h4 class="font-bold text-gray-800 text-sm">${item.n}</h4>
                                    ${item.d ? `<p class="text-[10px] text-gray-400 mt-1 italic">${item.d}</p>` : ''}
                                    <p class="text-sm font-black text-amber-700 mt-1">$${item.p.toLocaleString()}</p>
                                </div>
                                <div class="flex items-center gap-3 bg-gray-50 p-1.5 rounded-xl">
                                    <button onclick="updateQty('${item.n}', ${item.p}, -1, '${cleanId}')" class="w-8 h-8 rounded-lg bg-white shadow-sm flex items-center justify-center font-bold text-gray-500">-</button>
                                    <span id="qty-${cleanId}" class="font-bold text-estancia w-5 text-center">0</span>
                                    <button onclick="updateQty('${item.n}', ${item.p}, 1, '${cleanId}')" class="w-8 h-8 rounded-lg bg-estancia text-white shadow-sm flex items-center justify-center font-bold">+</button>
                                </div>
                            </div>`;
                        }).join('')}
                    </div>
                </div>
            `).join('');
        }

        function updateQty(name, price, change, id) {
            if (!cart[name]) cart[name] = { qty: 0, price: price };
            cart[name].qty += change;
            if (cart[name].qty < 0) cart[name].qty = 0;
            
            const el = document.getElementById(`qty-${id}`);
            if (el) el.innerText = cart[name].qty;
            calculateTotal();
        }

        function calculateTotal() {
            let total = 0;
            for (let i in cart) { total += cart[i].qty * cart[i].price; }
            document.getElementById('total-price').innerText = `$${total.toLocaleString()}`;
        }

        function filterMenu() {
            let q = document.getElementById('search').value.toLowerCase();
            let cards = document.getElementsByClassName('item-card');
            for (let c of cards) {
                let name = c.querySelector('h4').innerText.toLowerCase();
                c.style.display = name.includes(q) ? "flex" : "none";
            }
        }

        function sendWhatsApp() {
            const n = document.getElementById('nombre').value;
            const c = document.getElementById('celular').value;
            const d = document.getElementById('direccion').value;
            const o = document.getElementById('obs_generales').value;
            
            if (!n || !c || !d) { alert("Por favor completa tus datos."); return; }

            let msg = `*LA ESTANCIA - NUEVO PEDIDO*%0A`;
            msg += `*Cliente:* ${n}%0A*Celular:* ${c}%0A*Dir:* ${d}%0A%0A`;
            
            let total = 0;
            let items = false;

            for (let k in cart) {
                if (cart[k].qty > 0) {
                    msg += `• ${cart[k].qty}x ${k} ($${(cart[k].qty * cart[k].price).toLocaleString()})%0A`;
                    total += cart[k].qty * cart[k].price;
                    items = true;
                }
            }

            if (!items) { alert("Agrega platos al carrito."); return; }
            if (o) msg += `%0A*Obs:* ${o}%0A`;
            msg += `%0A*TOTAL: $${total.toLocaleString()}*`;

            window.open(`https://wa.me/573205775709?text=${msg}`, '_blank');
        }

        // Ejecutar al cargar la página
        window.onload = renderMenu;
    </script>
</body>
</html>
