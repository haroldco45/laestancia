<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Estancia - App Oficial</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --primary: #5c3c2e; }
        body { font-family: sans-serif; background-color: #f3f4f6; }
        .bg-estancia { background-color: var(--primary); }
        .text-estancia { color: var(--primary); }
        .category-sticky { position: sticky; top: 0; z-index: 30; background: #f3f4f6; padding: 10px 0; border-bottom: 1px solid #e5e7eb; }
        .card-menu { border-left: 5px solid var(--primary); }
        /* Ajuste para que el logo se vea bien */
        .header-logo { width: 100%; max-height: 180px; object-fit: cover; }
    </style>
</head>
<body class="pb-48">

    <div class="bg-estancia text-white shadow-lg overflow-hidden">
        <img src="la-estancia.PNG" alt="La Estancia Logo" class="header-logo">
        <div class="p-4 text-center">
            <p class="text-[10px] tracking-[0.2em] opacity-90 uppercase">Asados & Mariscos</p>
            <p class="text-[11px] mt-1 opacity-80">
                <i class="fas fa-map-marker-alt"></i> Calle 22 Diagonal a la Catedral - Caucasia
            </p>
        </div>
    </div>

    <div class="p-4 max-w-md mx-auto">
        <div class="bg-white p-5 rounded-2xl shadow-sm mb-6 border border-gray-100">
            <h2 class="font-bold text-estancia mb-4 flex items-center gap-2 text-xs uppercase">
                <i class="fas fa-motorcycle"></i> Datos del Domicilio
            </h2>
            <div class="space-y-3">
                <input type="text" id="nombre" placeholder="Nombre completo" class="w-full p-3 bg-gray-50 rounded-xl border outline-none focus:border-amber-800">
                <input type="tel" id="celular" placeholder="Número de Celular" class="w-full p-3 bg-gray-50 rounded-xl border outline-none focus:border-amber-800">
                <input type="text" id="direccion" placeholder="Dirección de entrega" class="w-full p-3 bg-gray-50 rounded-xl border outline-none focus:border-amber-800">
                <textarea id="obs" placeholder="¿Alguna nota para la cocina?" class="w-full p-3 bg-gray-50 rounded-xl text-sm border outline-none" rows="2"></textarea>
            </div>
        </div>

        <div class="relative mb-6">
            <input type="text" id="search" onkeyup="filterItems()" placeholder="Buscar plato o bebida..." 
                   class="w-full p-4 pl-12 rounded-2xl shadow-md border-none outline-none">
            <i class="fas fa-search absolute left-4 top-5 text-gray-400"></i>
        </div>

        <div id="menu-list" class="space-y-8"></div>
    </div>

    <div class="fixed bottom-0 w-full bg-white border-t p-5 shadow-[0_-10px_20px_rgba(0,0,0,0.05)] z-50">
        <div class="max-w-md mx-auto">
            <div class="flex justify-between items-center mb-4 px-2">
                <span class="text-gray-500 font-medium text-sm">Total a pagar:</span>
                <span id="total-val" class="text-3xl font-black text-estancia">$0</span>
            </div>
            <button onclick="enviarPedido()" class="w-full bg-green-600 text-white py-4 rounded-2xl font-bold flex justify-center items-center gap-3 shadow-lg active:scale-95 transition-all">
                <i class="fab fa-whatsapp text-2xl"></i> PEDIR POR WHATSAPP
            </button>
        </div>
    </div>

    <script>
        const fullData = [
            { c: "Entradas", i: [
                { n: "Patacón tres salsas", p: 16000, d: "Suero, guacamole y hogao" },
                { n: "Maduritos con queso", p: 16000 },
                { n: "Entrada de chorizo", p: 16000, d: "Con croquetas de yuca o patacón" },
                { n: "Entrada de chicharrón", p: 20000 }
            ]},
            { c: "Ensaladas", i: [
                { n: "César con pollo", p: 22000 },
                { n: "César con camarones", p: 27000 },
                { n: "Mediterránea", p: 33000 }
            ]},
            { c: "Pollo", i: [
                { n: "Rollo de pollo", p: 35000, d: "Relleno de jamón, tocinetas y queso holandés" },
                { n: "Pechuga en salsa tropical", p: 35000 },
                { n: "Pechuga en tocineta", p: 35000 },
                { n: "Pechuga en champiñones", p: 35000 },
                { n: "Pechuga stroganoff", p: 37000 }
            ]},
            { c: "Cerdo", i: [
                { n: "Cerdo a la naranja", p: 35000 },
                { n: "Cerdo en tocineta", p: 35000 },
                { n: "Cerdo en champiñones", p: 35000 },
                { n: "Cerdo en salsa tropical", p: 35000 },
                { n: "Cerdo stroganoff", p: 37000 }
            ]},
            { c: "Res", i: [
                { n: "Estofado de lomo", p: 36000 },
                { n: "Steak pimienta", p: 38000 },
                { n: "Solomito en tocineta", p: 40000 },
                { n: "Solomito en champiñones", p: 40000 },
                { n: "Solomito stroganoff", p: 40000 },
                { n: "Filet Mignon", p: 40000 }
            ]},
            { c: "Pastas", i: [
                { n: "Pasta Amatriciana", p: 18000 }, { n: "Pasta Vegetariana", p: 18000 },
                { n: "Pasta Al filetto", p: 20000 }, { n: "Pasta Alfredo", p: 22000 },
                { n: "Pasta Cuatro quesos", p: 22000 }, { n: "Pasta Carbonara", p: 25000 },
                { n: "Pasta Jeremías", p: 28000 }, { n: "Pasta con camarones", p: 34000 },
                { n: "Pasta Marinera", p: 38000 }
            ]},
            { c: "Asados al Grill", i: [
                { n: "Chuleta de cerdo 400gr", p: 30000 }, { n: "Cañón al grill 340gr", p: 32000 },
                { n: "Pechuga al grill 320gr", p: 32000 }, { n: "Chicharrón al grill 420gr", p: 34000 },
                { n: "Costillas BBQ 500gr", p: 38000 }, { n: "Mix parrillero 480gr", p: 38000 },
                { n: "Baby beef 350gr", p: 40000 }, { n: "Punta de anca 400gr", p: 40000 },
                { n: "Churrasco 350gr", p: 40000 }, { n: "T-bone 620gr", p: 68000 },
                { n: "Tomahawk 620gr", p: 68000 }
            ]},
            { c: "Mariscos", i: [
                { n: "Cóctel de camarón", p: 37000 }, { n: "Camarones al ajillo", p: 46000 },
                { n: "Parrilla mar y tierra", p: 48000 }, { n: "Cazuela de mariscos", p: 49000 },
                { n: "Cazuela mixta gratinada", p: 53000 }, { n: "Langostinos al ajillo", p: 61000 },
                { n: "Langostinos apanados", p: 63000 }
            ]},
            { c: "Pescados (Salmón)", i: [
                { n: "Salmón a la plancha", p: 48000 }, { n: "Salmón menier", p: 50000 },
                { n: "Salmón gratinado", p: 53000 }, { n: "Salmón al ajillo", p: 54000 },
                { n: "Salmón marinera", p: 65000 }
            ]},
            { c: "Express y Ejecutivos", i: [
                { n: "Salchipapa", p: 18000 }, { n: "Hamburguesa", p: 20000 },
                { n: "Chuzo de pollo", p: 22000 }, { n: "Alitas BBQ/Picantes", p: 24000 },
                { n: "Ejecutivo del día", p: 23000 }, { n: "Sancocho (Domingos)", p: 23000 }
            ]},
            { c: "Bebidas", i: [
                { n: "Limonada Natural", p: 9000 }, { n: "Limonada Coco/Cereza", p: 10000 },
                { n: "Jugos Naturales", p: 9000 }, { n: "Gaseosa 350ml", p: 4000 },
                { n: "Soda Saborizada", p: 8000 }, { n: "Agua 600ml", p: 3000 }
            ]}
        ];

        let cart = {};

        function render() {
            const list = document.getElementById('menu-list');
            list.innerHTML = fullData.map(cat => `
                <div>
                    <div class="category-sticky"><h3 class="font-black text-estancia uppercase text-xs tracking-widest px-2">${cat.c}</h3></div>
                    <div class="mt-4 space-y-3">
                        ${cat.i.map(item => {
                            const id = item.n.replace(/\s+/g, '').replace(/[^a-zA-Z0-9]/g, '');
                            return `
                            <div class="item-card bg-white p-4 rounded-2xl shadow-sm flex justify-between items-center card-menu border border-gray-100">
                                <div class="flex-1 pr-2">
                                    <h4 class="font-bold text-gray-800 text-sm">${item.n}</h4>
                                    <p class="text-[10px] text-gray-400 mt-1 italic">${item.d || ''}</p>
                                    <p class="text-sm font-black text-amber-700 mt-1">$${item.p.toLocaleString()}</p>
                                </div>
                                <div class="flex items-center gap-3 bg-gray-50 p-1.5 rounded-xl">
                                    <button onclick="changeQty('${item.n}', ${item.p}, -1, '${id}')" class="w-8 h-8 rounded-lg bg-white flex items-center justify-center font-bold text-gray-400 shadow-sm">-</button>
                                    <span id="q-${id}" class="font-bold text-estancia w-6 text-center">0</span>
                                    <button onclick="changeQty('${item.n}', ${item.p}, 1, '${id}')" class="w-8 h-8 rounded-lg bg-estancia text-white flex items-center justify-center font-bold shadow-sm">+</button>
                                </div>
                            </div>`;
                        }).join('')}
                    </div>
                </div>
            `).join('');
        }

        function changeQty(n, p, delta, id) {
            if (!cart[n]) cart[n] = { q: 0, p: p };
            cart[n].q += delta;
            if (cart[n].q < 0) cart[n].q = 0;
            document.getElementById('q-' + id).innerText = cart[n].q;
            updateTotal();
        }

        function updateTotal() {
            let t = 0;
            for (let k in cart) t += cart[k].q * cart[k].p;
            document.getElementById('total-val').innerText = '$' + t.toLocaleString();
        }

        function filterItems() {
            const q = document.getElementById('search').value.toLowerCase();
            const cards = document.getElementsByClassName('item-card');
            for (let c of cards) {
                const name = c.querySelector('h4').innerText.toLowerCase();
                c.style.display = name.includes(q) ? "flex" : "none";
            }
        }

        function enviarPedido() {
            const n = document.getElementById('nombre').value;
            const c = document.getElementById('celular').value;
            const d = document.getElementById('direccion').value;
            if (!n || !c || !d) return alert("Por favor completa tus datos de entrega.");

            let msg = `*LA ESTANCIA - NUEVO PEDIDO*%0A*Cliente:* ${n}%0A*Celular:* ${c}%0A*Dir:* ${d}%0A%0A`;
            let items = false;
            let total = 0;

            for (let k in cart) {
                if (cart[k].q > 0) {
                    msg += `• ${cart[k].q}x ${k} ($${(cart[k].q * cart[k].p).toLocaleString()})%0A`;
                    total += cart[k].q * cart[k].p;
                    items = true;
                }
            }

            if (!items) return alert("Agregue al menos un plato a su pedido.");
            const obs = document.getElementById('obs').value;
            if (obs) msg += `%0A*Observaciones:* ${obs}`;
            msg += `%0A%0A*TOTAL: $${total.toLocaleString()}*`;
            window.open(`https://wa.me/573205775709?text=${msg}`, '_blank');
        }

        window.onload = render;
    </script>
</body>
</html>
